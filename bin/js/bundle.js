(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var Froogaloop=function(){function t(n){return new t.fn.init(n)}function n(t,n,e){if(!e.contentWindow.postMessage)return!1;var r=e.getAttribute("src").split("?")[0],i=JSON.stringify({method:t,value:n});"//"===r.substr(0,2)&&(r=window.location.protocol+r),e.contentWindow.postMessage(i,r)}function e(t){var n,e;try{n=JSON.parse(t.data),e=n.event||n.method}catch(r){}if("ready"!=e||s||(s=!0),t.origin!=d)return!1;var o=n.value,l=n.data,u=""===u?null:n.player_id,a=i(e,u),c=[];return a?(void 0!==o&&c.push(o),l&&c.push(l),u&&c.push(u),c.length>0?a.apply(null,c):a.call()):!1}function r(t,n,e){e?(a[e]||(a[e]={}),a[e][t]=n):a[t]=n}function i(t,n){return n?a[n][t]:a[t]}function o(t,n){if(n&&a[n]){if(!a[n][t])return!1;a[n][t]=null}else{if(!a[t])return!1;a[t]=null}return!0}function l(t){"//"===t.substr(0,2)&&(t=window.location.protocol+t);for(var n=t.split("/"),e="",r=0,i=n.length;i>r&&3>r;r++)e+=n[r],2>r&&(e+="/");return e}function u(t){return!!(t&&t.constructor&&t.call&&t.apply)}var a={},s=!1,d=(Array.prototype.slice,"");return t.fn=t.prototype={element:null,init:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.element=t,d=l(this.element.getAttribute("src")),this},api:function(t,e){if(!this.element||!t)return!1;var i=this,o=i.element,l=""!==o.id?o.id:null,a=u(e)?null:e,s=u(e)?e:null;return s&&r(t,s,l),n(t,a,o),i},addEvent:function(t,e){if(!this.element)return!1;var i=this,o=i.element,l=""!==o.id?o.id:null;return r(t,e,l),"ready"!=t?n("addEventListener",t,o):"ready"==t&&s&&e.call(null,l),i},removeEvent:function(t){if(!this.element)return!1;var e=this,r=e.element,i=""!==r.id?r.id:null,l=o(t,i);"ready"!=t&&l&&n("removeEventListener",t,r)}},t.fn.init.prototype=t.fn,window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent("onmessage",e),window.Froogaloop=window.$f=t}();


},{}],2:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function init(){document.getElementById("container").className="fadein",moveTo(0)}function play(){hasStarted=!0,videoLeft.addEventListener("buffering",onBuffer),videoRight.addEventListener("buffering",onBuffer),videoLeft.addEventListener("finish",loop),videoRight.addEventListener("finish",loop),videoLeft.play(),videoRight.play()}function loop(e){videoLeft.player.api("paused"),videoRight.player.api("paused"),videoLeft.seek(0),videoRight.seek(0),videoRight.play(),videoLeft.play()}function resync(e){videoLeft.player.api("paused"),videoRight.player.api("paused");var o=Math.min(videoLeft.elapsed,videoRight.elapsed);videoLeft.seek(o),videoRight.seek(o)}function onBuffer(e){}function bufferEndHandler(e){"paused"===videoLeft.state&&"paused"===videoRight.state&&(console.log("playing resynced videos"),videoLeft.addEventListener("bufferEnd",bufferEndHandler),videoRight.addEventListener("bufferEnd",bufferEndHandler),videoLeft.play(),videoRight.play())}function moveTo(e){videoLeft.setWidth(e+"%"),overlay.setPosition(e),videoLeft.setVolume(e+pointerOffset),videoRight.setVolume(100-e+pointerOffset)}function animateTo(e,o){}function render(){var e=videoLeft.getWidth();moveTo(e++),window.requestAnimationFrame(render)}function onmousemove(e){if(e.stopPropagation(),e.preventDefault(),isDown){var o=100*e.pageX/window.innerWidth;moveTo(o-pointerOffset)}}var _vimeoFroogaloop=require("vimeo-froogaloop"),_vimeoFroogaloop2=_interopRequireDefault(_vimeoFroogaloop),_videoitem=require("./videoitem"),_videoitem2=_interopRequireDefault(_videoitem),_preloader=require("./preloader"),_preloader2=_interopRequireDefault(_preloader),_overlay=require("./overlay"),_overlay2=_interopRequireDefault(_overlay),preloader=new _preloader2["default"]("preloader","status",init),videoRight=new _videoitem2["default"]("video-wrapper-right",preloader),videoLeft=new _videoitem2["default"]("video-wrapper-left",preloader),overlay=new _overlay2["default"]("overlay","message"),container=document.getElementById("container"),isDown=!1,syncing=!1,hasStarted=!1,pointerOffset=0,target=100;overlay.element.addEventListener("mousedown",function(e){e.stopPropagation(),e.preventDefault(),isDown=!0,pointerOffset=100*e.pageX/window.innerWidth-overlay.position,hasStarted||play()}),overlay.element.addEventListener("mouseup",function(e){e.stopPropagation(),e.preventDefault(),isDown=!1}),container.addEventListener("mousemove",onmousemove),window.onblur=function(){videoLeft.pause(),videoRight.pause(),resync()},window.onfocus=function(){videoLeft.play(),videoRight.play()};


},{"./overlay":3,"./preloader":4,"./videoitem":6,"vimeo-froogaloop":1}],3:[function(require,module,exports){
"use strict";function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,s){for(var t=0;t<s.length;t++){var a=s[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(s,t,a){return t&&e(s.prototype,t),a&&e(s,a),s}}(),Overlay=function(){function e(s,t){_classCallCheck(this,e),this.element=document.getElementById(s),this.message=document.getElementById(t),this.arrows=document.getElementsByClassName("arrow"),this.position=0}return _createClass(e,[{key:"setPosition",value:function(e){this.position=e,this.element.style.left=e+"%"}},{key:"showArrows",value:function(){this.arrows[0].className=this.arrows[0].className+" show",this.arrows[1].className=this.arrows[1].className+" show"}},{key:"hideArrows",value:function(){this.arrows[0].className=this.arrows[0].className.split(" show").join(""),this.arrows[1].className=this.arrows[1].className.split(" show").join("")}},{key:"hideMessage",value:function(){this.message.className="fadeout"}},{key:"showMessage",value:function(){this.message.className=""}},{key:"setMessage",value:function(e){this.message.innerHTML=e}},{key:"setWidth",value:function(){}}]),e}();exports["default"]=Overlay,module.exports=exports["default"];


},{}],4:[function(require,module,exports){
"use strict";"user strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),video1=Symbol(),video2=Symbol(),Preloader=function(){function e(t,s,a){_classCallCheck(this,e),this.element=document.getElementById(t),this.status=document.getElementById(s),this.callback=a,this.video1=0,this.video2=0}return _createClass(e,[{key:"fadeout",value:function(){this.element.className="fadeout"}},{key:"setProgress",value:function(e,t){this[t]=e;var s=Math.floor(.5*(this.video1+this.video2));this.status.innerHTML=s+"%",s>=100&&(this.callback(),this.fadeout(),this.status.innerHTML="100%")}}]),e}();exports["default"]=Preloader,module.exports=exports["default"];


},{}],5:[function(require,module,exports){
"use strict";function normalize(e){return Math.min(1,Math.max(0,e))}function percent(e,n){return 100*e/n}module.exports={normalize:normalize,percent:percent};


},{}],6:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),BUFFER_LOADED_THRESHOLD=10,BUFFER_ENTER_THRESHOLD=2,BUFFER_DIFF_THRESHOLD=0,normalize=require("./utils").normalize,percent=require("./utils").percent,STATE={UNLOADED:"unloaded",LOADED:"loaded",BUFFERING:"buffering",PAUSED:"paused",STOPPED:"stopped",PLAYING:"playing",SEEKING:"seeking",FINISHED:"finished"},bufferInitEvent=void 0,bufferEndEvent=void 0,videoFinishEvent=void 0,VideoItem=function(){function e(t,i){function s(e){this.player.removeEvent("ready"),this.player.addEvent("playProgress",a.bind(this)),this.player.addEvent("loadProgress",r.bind(this)),this.player.addEvent("finish",l.bind(this)),this.player.api("play"),this.player.api("seekTo",0),this.player.api("pause")}function a(e){this.state===STATE.UNLOADED&&(this.player.api("pause"),this.player.api("seekTo",0),this.state=STATE.LOADED),this.elapsed=e.seconds}function n(e){var t=e.seconds-this.elapsed;this.state===STATE.BUFFERING?(t>BUFFER_LOADED_THRESHOLD&&(this.state=STATE.PAUSED,this.wrapper.dispatchEvent(bufferEndEvent)),console.log(this.id,t)):BUFFER_ENTER_THRESHOLD>=t&&(this.player.api("pause"),this.state=STATE.BUFFERING,this.wrapper.dispatchEvent(bufferInitEvent))}function r(e){var t=percent(e.seconds,BUFFER_LOADED_THRESHOLD);t>=100?(i.setProgress(100,this.id),this.player.removeEvent("loadProgress",r),this.player.addEvent("loadProgress",n.bind(this)),this.state=STATE.STOPPED):i.setProgress(t,this.id)}function l(e){this.state=STATE.FINISHED,this.wrapper.dispatchEvent(videoFinishEvent)}_classCallCheck(this,e),this.wrapper=document.getElementById(t),this.id=this.wrapper.getAttribute("data-id"),this.iframe=this.wrapper.getElementsByTagName("iframe")[0],this.player=$f(this.iframe),this.player.addEvent("ready",s.bind(this)),this.state=STATE.UNLOADED,this.elapsed=0,bufferInitEvent=new CustomEvent("buffering",{detail:{id:this.id},bubbles:!0,cancelable:!0}),bufferEndEvent=new CustomEvent("bufferEnd",{detail:{id:this.id},bubbles:!0,cancelable:!0}),videoFinishEvent=new CustomEvent("finish",{detail:{id:this.id},bubbles:!0,cancelable:!0})}return _createClass(e,[{key:"play",value:function(){this.player.api("play"),this.state=STATE.PLAYING}},{key:"pause",value:function(){this.player.api("pause"),this.state=STATE.PAUSED}},{key:"addEventListener",value:function(e,t){this.wrapper.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.wrapper.removeEventListener(e,t)}},{key:"setVolume",value:function(e){this.player.api("setVolume",normalize(e/100))}},{key:"setWidth",value:function(e){this.wrapper.style.width=e}},{key:"getWidth",value:function(){return this.wrapper.style.width.split("%")[0]}},{key:"getTime",value:function(){return this.elapsed}},{key:"seek",value:function(e){this.player.api("seekTo",e)}}]),e}();exports["default"]=VideoItem,module.exports=exports["default"];


},{"./utils":5}]},{},[2])